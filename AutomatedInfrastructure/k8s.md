# Kubernetes
## k8sを使うと何が嬉しいの？
### コンテナ運用で考えるべき様々な課題を一度に解決できる
例えば...
* 複数のKubernetes Nodeの管理
* コンテナのスケジューリング
* ローリングアップデート
* スケーリング/オートスケーリング
* コンテナの死活監視
* サービスディスカバリ
* ロードバランシング
* データの管理
* ワークロードの管理
* ログの管理
* Infrastructure as Code
* その他エコシステムとの連携や拡張

### Infrastructure as Code
* k8sではYAML形式やJSON形式で記述した宣言的なコード（マニフェスト）によって、デプロイするコンテナや周辺リソースを管理することができる。(= Infrastructure as Code)
* マニフェストは、木（ツリー）構造で表現できるデータであり、例えばコマンドラインツール「kubectl」ではYAML形式で記述されたマニフェストを元にリソースの作成や削除、変更といった操作を行える。
* マニフェストで定義した内容で処理できる内容一例
```bash
# マニフェストファイルによるリソースの作成
$ kubectl apply -f <manifest file>
```

   1. 設定に応じてコンテナを作成するクラスタノードを決定する
   2. そのクラスタノード上にコンテナ作成のためのイメージファイルをダウンロードする
   3. コンテナを作成しIPアドレスやストレージなどのリソースを割り当てる
   4. コンテナ内で指定されたプログラムを実行する

```bash
# ※マニフェストファイルが元となったリソースの削除
$ kubectl delete -f <manifest file>
```

* CloudFormationやOpenStackHeatに似てる

### スケーリング/オートスケーリング
* k8sはコンテナクラスタを形成して、複数のNodeを管理する
* 同じイメージを元とするレプリカのコンテナをデプロイすることで負荷分散や耐障害性の確保やレプリカ数のコントロールによって、オートスケーリングができる

### スケジューリング
* 

## 概要
Kubernetesは、複数台のコンピュータをネットワークで接続した「クラスタ環境」を使い、「ノード」と呼ばれるクラスタ内のコンピュータ上で実行されるサーバーソフトウェアを管理するツール
コンテナ技術によって、ハードウェアやOS/カーネルの性能や種類が異なるものを混在させることができるので実行環境がハードやOSに依存しないように構成できる。


## 用語
### クラスタ
クラスタ内では、複数サーバーがネットワーク上に構成されており、各サーバー上で、プログラムが動作する。
設定に応じてサーバー上でプログラムを起動したり、プログラムへのコネクションを管理する

## 代表的なリソースオブジェクト
| 名称 | 説明 |
| --- | --- |
| Pod | 使用するコンテナや実行するプログラムを定義 |
| Deployment | Podの管理方法を定義 |
| Job | 非定常的に処理を実行するジョブを定義 |
| CronJob | 定期的に実行されるジョブを定義する |
| Service | ネットワークサービスを定義 |
| ConfigMap | コンテナで使用される各種設定リソースを定義 |
| Secret | コンテナで使用される各種設定リソースを定義 |
| Volume | コンテナに割り当てるストレージを定義する |
| NameSpace  | 管理のための名前空間を定義 |

